{% extends 'base.html.twig' %}

{% block page_title %}{{ "Détail Devis Satisfaction" }}{% endblock %}

{% block stylesheets %}
    {{ parent() }}
    <!-- BEGIN PAGE LEVEL PLUGINS -->
    <link href="{{ asset('css/detail_devis_auto.css') }}" rel="stylesheet" type="text/css" />
    <!-- END PAGE LEVEL PLUGINS -->
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <!-- BEGIN PAGE LEVEL SCRIPTS -->
    <script src="{{ asset('js/devis_satisfaction.js') }}" type="text/javascript"></script>
    <!-- END PAGE LEVEL SCRIPTS -->
{% endblock %}
{% block body %}
    <div class="row">
        <div class="col-md-12">
            <!-- BEGIN EXAMPLE TABLE PORTLET-->
            <div class="portlet light portlet-fit ">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="icon-settings font-red"></i>
                        <span class="caption-subject font-red sbold uppercase">Devis satisfaction</span>
                    </div>
                </div>
                <div class="portlet-body">
                    <div class="table-toolbar">

                        
                         <div class="general_details_satisfaction" data-id="{{element.id}}">
                            <div class="row">
                            <input type="hidden" name="idDevis" id="idDevis" value="{{ element.id }}"/>
                            {% if  element.auto=="DA" %}
                               <h4> <i class="fa fa-user font-{{ app.session.get('insuranceType').themeColor }}"></i>
                                    {% if element.devisAuto is not null %}
                                      {{ element.devisAuto.civilite }}. {{ element.devisAuto.nom }} {{ element.devisAuto.prenom }}
                                    {% else %}
                                         inconnu
                                    {% endif %}
                                </h4>

                                <div class="col-md-4">
                                    <p>
                                        <span class="detail_label">Téléphone : </span>
                                        <span class="detail_info">
                                        {% if element.devisAuto is not null %}
                                            <input type="text" name="tel" disabled value="{{ element.devisAuto.tel }}">
                                        {% else %}
                                            <input type="text" name="tel" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>

                                    <p>
                                        <span class="detail_label">Commentaire : </span>
                                        <span class="detail_info">
                                        {% if element.comment is not null %}
                                            <input type="text" name="comment" disabled value="{{ element.comment }}">
                                        {% else %}
                                            <input type="text" name="comment" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>

                                    <p>
                                        <span class="detail_label">Prime HT: </span>
                                        <span class="detail_info">
                                        {% if element.devisAuto.primeHT is not null %}
                                            <input type="text" name="comment" disabled value="{{ element.devisAuto.primeHT }}">
                                        {% else %}
                                            <input type="text" name="comment" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>
                                    <p>
                                        <span class="detail_label">Prime TTC: </span>
                                        <span class="detail_info">
                                        {% if element.devisAuto.primeTTC is not null %}
                                            <input type="text" name="comment" disabled value="{{ element.devisAuto.primeTTC }}">
                                        {% else %}
                                            <input type="text" name="comment" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>

                                </div>

                                <div class="col-md-4">
                                    <p><span class="detail_label"> Email: </span>
                                        <span class="detail_info">
                                            <input type="text"  name="email" disabled value="{{ element.devisAuto.email }}">
                                        </span>
                                    </p>
                                    <p><span class="detail_label">Pack : </span>
                                        <span class="detail_info">
                                          {% if   element.devisAuto.pack is not null %}
                                            <input type="text"  name="pack" disabled value="{{ element.devisAuto.pack.name  }}">
                                        {% else %}
                                             <input type="text" name="raison" disabled value="">
                                        {% endif %}
                                        </span>
                                    </p>

                                <p>
                                    <span class="detail_label">Marque : </span>
                                    <span class="detail_info">
                                        {% if element.devisAuto.marque is not null %}
                                            <input type="text" name="marque" disabled value="{{ element.devisAuto.marque.nom }}">
                                        {% else %}
                                            <input type="text" name="nomarquem" disabled value="">
                                        {% endif %}
                                     </span>
                                </p>
                                <p>
                                    <span class="detail_label">Puissance : </span>
                                    <span class="detail_info">
                                        {% if element.devisAuto.puissance is not null %}
                                            <input type="text" name="puissance" disabled value="{{ element.devisAuto.puissance }}">
                                        {% else %}
                                            <input type="text" name="puissance" disabled value="">
                                        {% endif %}
                                     </span>
                                </p>


                                
                            </div>



                            <div class="col-md-4">
                                   <p>
                                        <span class="detail_label">Combustion : </span>
                                        <span class="detail_info">
                                            {% if element.devisAuto.combustion is not null %}
                                                <input type="text"  name="combustion" disabled value="{{ element.devisAuto.combustion }}">
                                            {% else %}
                                                <input type="text" name="combustion" disabled value="">
                                            {% endif %}
                                         </span>
                                    </p>
                                    <p><span class="detail_label"> Valeur Neuve : </span>
                                        <span class="detail_info">
                                            {% if   element.devisAuto.vn is not null %}
                                                <input type="text"  name="vn" disabled value="{{ element.devisAuto.vn  }}">
                                            {% else %}
                                                 <input type="text" name="vn" disabled value="">
                                            {% endif %}
                                        </span>
                                    </p>
                                    <p><span class="detail_label"> Valeur Vénale  : </span>
                                        <span class="detail_info">
                                          {% if   element.devisAuto.vv is not null %}
                                            <input type="text"  name="vv" disabled value="{{ element.devisAuto.vv  }}">
                                        {% else %}
                                             <input type="text" name="vv" disabled value="">
                                        {% endif %}
                                        </span>
                                    </p>

                                <p>
                                    <span class="detail_label">Valeur des glaces : </span>
                                    <span class="detail_info">
                                        {% if element.devisAuto.vg is not null %}
                                            <input type="text" name="vg" disabled value="{{ element.devisAuto.vg }}">
                                        {% else %}
                                            <input type="text" name="vg" disabled value="">
                                        {% endif %}
                                     </span>
                                </p>

                                <p>
                                    <span class="detail_label">Date mise en circulation : </span>
                                    <span class="detail_info">
                                        {% if element.devisAuto.datemec is not null %}
                                            <input type="text" name="vg" disabled value="{{element.devisAuto.datemec | date('Y-m-d H:i:s')  }}">
                                        {% else %}
                                            <input type="text" name="vg" disabled value="">
                                        {% endif %}
                                     </span>
                                </p>
                            </div>

                            {% elseif element.auto=="DH" %}
                                 <h4> <i class="fa fa-user font-{{ app.session.get('insuranceType').themeColor }}"></i>
                                    {% if element.devisHabitation is not null %}
                                      {{ element.devisHabitation.nom }} {{ element.devisHabitation.prenom }}
                                    {% else %}
                                         inconnu
                                    {% endif %}
                                </h4>

                                <div class="col-md-6">
                                    <p><span class="detail_label"> Email: </span>
                                        <span class="detail_info">
                                            {% if element.devisHabitation.email is not null %}
                                                <input type="text"  name="email" disabled value="{{ element.devisHabitation.email }}">
                                            {% else %}
                                                <input type="text" name="email" disabled value="">
                                            {% endif %}

                                        </span>
                                    </p>
                                    <p>
                                        <span class="detail_label">Téléphone : </span>
                                        <span class="detail_info">
                                            {% if element.devisHabitation.tel is not null %}
                                                <input type="text"  name="tel" disabled value="{{ element.devisHabitation.tel }}">
                                            {% else %}
                                                <input type="text" name="tel" disabled value="">
                                            {% endif %}
                                        </span>
                                    </p>

                                <p>
                                    <span class="detail_label">Contenu : </span>
                                    <span class="detail_info">
                                        {% if element.devisHabitation.contenu is not null %}
                                            <input type="text"  name="contenu" disabled value="{{ element.devisHabitation.contenu }}">
                                            {% else %}
                                            <input type="text" name="contenu" disabled value="">
                                        {% endif %}
                                     </span>
                                </p>



                                    <p>
                                        <span class="detail_label">Prime HT: </span>
                                        <span class="detail_info">
                                        {% if element.devisHabitation.primeHT is not null %}
                                            <input type="text" name="comment" disabled value="{{ element.devisHabitation.primeHT }}">
                                        {% else %}
                                            <input type="text" name="comment" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>
                                    <p>
                                        <span class="detail_label">Prime TTC: </span>
                                        <span class="detail_info">
                                        {% if element.devisHabitation.primeTTC is not null %}
                                            <input type="text" name="comment" disabled value="{{ element.devisHabitation.primeTTC }}">
                                        {% else %}
                                            <input type="text" name="comment" disabled value="">
                                        {% endif %}
                                     </span>
                                    </p>

                            </div>

                            <div class="col-md-6">
                                <p>
                                    <span class="detail_label">Proprieté : </span>
                                    <span class="detail_info">
                                            {% if element.devisHabitation.propriete is not null %}
                                                <input type="text"  name="propriete" disabled value="{{ element.devisHabitation.propriete.name }}">
                                            {% else %}
                                                <input type="text" name="propriete" disabled value="">
                                            {% endif %}
                                     </span>
                                </p>
                                <p>
                                    <span class="detail_label">Catégorie : </span>
                                    <span class="detail_info">
                                            {% if element.devisHabitation.categorie is not null %}
                                                <input type="text"  name="categorie" disabled value="{{ element.devisHabitation.categorie.name }}">
                                            {% else %}
                                                <input type="text" name="categorie" disabled value="">
                                            {% endif %}
                                     </span>
                                </p>
                                <p>
                                    <span class="detail_label">Batiment : </span>
                                    <span class="detail_info">
                                            {% if element.devisHabitation.batiment is not empty %}
                                                <input type="text"  name="batiment" disabled value="{{ element.devisHabitation.batiment.value }}">
                                            {% else %}
                                                <input type="text" name="batiment" disabled value="">
                                            {% endif %}
                                     </span>
                                </p>


                            </div>

                            {% endif %}

                            </div>

                     </div>

                    </div>

                    {% if garanties | length > 0 %}

                    <div class="row">
                          <div class="garantie top">
                            <div class="caption">
                                <i class="icon-settings font-red"></i>
                                <span class="caption-subject font-red sbold uppercase">GARANTIE</span>
                            </div>
                          </div>
                         {% for garantie in garanties %}
                          <div class="garanties">
                            <div class="col-md-8">
                                <div class="cart">
                                    <div class="col-md-10">
                                       <p><strong>{{ garantie.garantie }} </strong></p> 
                                       {% if garantie.libOption  %}
                                         <p class="small">{{ garantie.libOption }}</p>
                                       {% endif %}

                                    </div>
                                    <div class="col-md-2">
                                         {% if garantie.acquise =="O"  %}
                                       <span class="label label-success pull-right"><strong>OUI </strong></span> 
                                       {% else %}
                                        <span class="label label-danger pull-right"><strong>NON </strong></span> 
                                       {% endif %}
                                    </div>
                                   
                                </div>

                            </div>
                           </div>
                        {% endfor %}

                    </div>

                  {% endif %}

                    <div class="row" style="margin-top:20px">
                        <div class="observation">

                        <div class="col-md-6">
                            <p>
                                <span class="detail_label">Observation :</span>
                                {% if element.observation is not null %}
                                    <textarea type="text" name="observation" class="observation form-control">{{ element.observation }}</textarea>
                                {% else %}
                                    <textarea type="text" name="observation" class="observation form-control"></textarea>
                                {% endif %}
                            </p>
                            <p>
                                <a class="btn btn-primary actionDevis" data-val="{{ element.action }}">Valider</a>
                            </p>
                        </div>
                        <div class="col-md-6">
                            <p class="pull-right">
                                <a class="btn btn-danger actionDevis" data-val="0">Injoignable</a>
                                <a class="btn btn-warning actionDevis"  data-val="1">Déjà appelé</a>
                                <a class="btn btn-success actionDevis"  data-val="2">Contacté</a>
                            </p>
                        </div>

                    </div>
                    </div>

                </div>
            </div>
            <!-- END EXAMPLE TABLE PORTLET-->
        </div>
    </div>

{% endblock %}
